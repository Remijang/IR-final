10.3.3 EX Stage

Let us now take a look at the EX stage in Figure 10.6. The ALU receives its inputs(  and  ) from the OF-EX pipeline register. The results generated by this stage are the aluResult (result of the ALU operation), the final branch target, and the branch outcome. The branch outcome is 1, if the branch is taken, otherwise it is 0. The result of the ALU operation is added to the instruction packet, and saved in the EX-MA register. The EX-MA register also contains the rest of the fields of the instruction packet namely the PC, instruction (contents of the instruction), control signals, and the second operand read from the register file (op2).

For computing the final branch target, we need to choose between the branch target computed in the OF stage and the value of the return address register (possibly stored in  ). The result of the choice is the final branch target(branchP C), and this is sent to the fetch unit. The branch unit computes the value of the signal, isBranchT aken. If it is 1, then the instruction is a branch, and it is taken. Otherwise, the fetch unit needs to use the default option of fetching the next PC.